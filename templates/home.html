<!doctype html>
<html lang="fr" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CODM - Plateforme Tournois</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&amp;display=swap" rel="stylesheet">
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Rajdhani', sans-serif;
        }
        
        .bg-pattern {
            background-image: 
                linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.9)),
                repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255, 255, 255, 0.02) 10px, rgba(255, 255, 255, 0.02) 20px);
        }
        
        .glow-text {
            text-shadow: 0 0 20px currentColor, 0 0 40px currentColor;
        }

        .nav-item {
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-item:hover {
            transform: translateX(8px);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: -4px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, #ff4500, #ffa500);
            border-radius: 0 4px 4px 0;
        }

        .feature-card {
            background: linear-gradient(135deg, rgba(255, 69, 0, 0.1), rgba(255, 165, 0, 0.05));
            border: 2px solid rgba(255, 69, 0, 0.3);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            border-color: #ff4500;
            box-shadow: 0 0 30px rgba(255, 69, 0, 0.4);
            transform: translateY(-5px);
        }

        .tactical-grid {
            background-image: 
                linear-gradient(rgba(255, 165, 0, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 165, 0, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        .pulse-dot {
            animation: pulseDot 2s ease-in-out infinite;
        }

        @keyframes pulseDot {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .btn-glow {
            box-shadow: 0 0 20px rgba(255, 69, 0, 0.6), 0 4px 15px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
        }
        
        .btn-glow:hover {
            box-shadow: 0 0 30px rgba(255, 69, 0, 0.9), 0 6px 20px rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
        }

        .scan-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(255, 165, 0, 0.8), transparent);
            animation: scan 4s linear infinite;
        }
        
        @keyframes scan {
            0% { top: 0; opacity: 0; }
            50% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        .hexagon-icon {
            width: 60px;
            height: 60px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -100%;
                transition: left 0.3s ease;
                z-index: 50;
            }
            
            .sidebar.open {
                left: 0;
            }
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full">
  <div class="main-wrapper h-full w-full flex bg-pattern overflow-auto"><!-- Vertical Sidebar -->
   <aside class="sidebar w-64 bg-black bg-opacity-80 border-r-2 border-orange-600 flex-shrink-0 overflow-y-auto">
    <div class="p-6"><!-- Logo -->
     <div class="text-center mb-8 pb-6 border-b-2 border-orange-600">
      <div class="inline-block mb-3">
       <svg class="w-16 h-16" viewbox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M50 10L90 30V70L50 90L10 70V30L50 10Z" stroke="#FF4500" stroke-width="3" fill="rgba(255, 69, 0, 0.2)" /> <circle cx="50" cy="50" r="8" fill="#FFA500" />
       </svg>
      </div>
      <h2 id="siteTitle" class="text-2xl font-bold text-orange-500 glow-text">CODM TOURNAMENTS</h2>
      <div class="flex items-center justify-center space-x-2 mt-3">
       <div class="w-2 h-2 bg-green-500 rounded-full pulse-dot"></div><span class="text-xs text-gray-400 uppercase">Plateforme active</span>
      </div>
     </div><!-- Navigation -->
     <nav class="space-y-2"><a href="#accueil" onclick="showPage('home'); return false;" class="nav-item active flex items-center space-x-3 px-4 py-3 rounded-lg bg-gradient-to-r from-orange-600 to-transparent text-white font-semibold">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
       </svg><span>Accueil</span> </a> <a href="#dashboard" onclick="showPage('dashboard'); return false;" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:text-orange-500 hover:bg-orange-900 hover:bg-opacity-20 font-semibold">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
       </svg><span>Dashboard</span> </a> <a href="#tournois" onclick="showPage('tournaments'); return false;" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:text-orange-500 hover:bg-orange-900 hover:bg-opacity-20 font-semibold">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
       </svg><span>Mes Tournois</span> </a> <a href="#" onclick="showPage('createTournament'); return false;" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:text-orange-500 hover:bg-orange-900 hover:bg-opacity-20 font-semibold">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
       </svg><span>Cr√©er un Tournoi</span> </a> <a href="#profil" onclick="showPage('profile'); return false;" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:text-orange-500 hover:bg-orange-900 hover:bg-opacity-20 font-semibold">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
       </svg><span>Mon Profil</span> </a> <a href="#premium" onclick="showPage('premium'); return false;" class="nav-item flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-300 hover:text-orange-500 hover:bg-orange-900 hover:bg-opacity-20 font-semibold">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
       </svg><span>Premium</span> </a>
     </nav><!-- User Section -->
     <div class="mt-8 pt-6 border-t-2 border-orange-600">
      <div class="flex items-center space-x-3 px-4 py-3 bg-gradient-to-r from-orange-900 to-transparent rounded-lg">
       <div class="w-10 h-10 rounded-full bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center text-white font-bold">
        O
       </div>
       <div class="flex-1">
        <p class="text-white font-semibold text-sm">Organisateur</p>
        <p class="text-gray-400 text-xs">Pro Tier</p>
       </div>
      </div>
     </div>
    </div>
   </aside><!-- Main Content -->
   <main class="flex-1 overflow-y-auto"><!-- Home Page -->
    <div id="homePage" class="tactical-grid min-h-full"><!-- Hero Section -->
     <section class="relative px-8 py-16 md:px-16 md:py-24 overflow-hidden">
      <div class="scan-line"></div>
      <div class="max-w-4xl mx-auto text-center">
       <div class="mb-8">
        <svg class="hexagon-icon mx-auto" viewbox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M50 10L90 30V70L50 90L10 70V30L50 10Z" stroke="#FF4500" stroke-width="3" fill="rgba(255, 69, 0, 0.1)" /> <path d="M50 25L75 37.5V62.5L50 75L25 62.5V37.5L50 25Z" stroke="#FFA500" stroke-width="2" fill="rgba(255, 165, 0, 0.2)" /> <circle cx="50" cy="50" r="8" fill="#FFA500" />
        </svg>
       </div>
       <h1 id="heroTitle" class="text-6xl md:text-7xl font-bold text-orange-500 glow-text mb-6">BIENVENUE ORGANISATEUR</h1>
       <p id="heroSubtitle" class="text-2xl text-orange-300 mb-8">Organisez vos tournois comp√©titifs</p>
       <p class="text-gray-300 text-lg mb-10 leading-relaxed max-w-2xl mx-auto">Cr√©ez et g√©rez des tournois CODM professionnels. Mode BR (4 joueurs), MJ (5v5), ou 1v1. Les participants cr√©ent leurs √©quipes et s'inscrivent directement.</p><button onclick="showPage('createTournament')" class="btn-glow inline-block px-12 py-4 bg-gradient-to-r from-orange-600 to-red-600 text-white font-bold text-xl uppercase tracking-wider rounded-lg hover:from-orange-500 hover:to-red-500 transition-all"> <span id="ctaButton">CR√âER UN TOURNOI</span> </button>
      </div>
     </section><!-- Features Section -->
     <section class="px-8 py-16 md:px-16 bg-black bg-opacity-40">
      <div class="max-w-6xl mx-auto">
       <div class="text-center mb-12">
        <h2 class="text-4xl font-bold text-orange-500 glow-text mb-3">FONCTIONNALIT√âS</h2>
        <div class="w-32 h-1 bg-gradient-to-r from-transparent via-orange-500 to-transparent mx-auto"></div>
       </div>
       <div class="grid grid-cols-1 md:grid-cols-3 gap-8"><!-- Feature 1 -->
        <div class="feature-card rounded-lg p-8 text-center">
         <div class="mb-6">
          <svg class="w-16 h-16 mx-auto text-orange-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
          </svg>
         </div>
         <h3 id="feature1Title" class="text-2xl font-bold text-orange-400 mb-4">CR√âER DES TOURNOIS</h3>
         <p id="feature1Desc" class="text-gray-300">Organisez vos propres tournois avec brackets personnalis√©s</p>
        </div><!-- Feature 2 -->
        <div class="feature-card rounded-lg p-8 text-center">
         <div class="mb-6">
          <svg class="w-16 h-16 mx-auto text-orange-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
          </svg>
         </div>
         <h3 id="feature2Title" class="text-2xl font-bold text-orange-400 mb-4">GESTION D'√âQUIPES</h3>
         <p id="feature2Desc" class="text-gray-300">Inscrivez et g√©rez vos √©quipes</p>
        </div><!-- Feature 3 -->
        <div class="feature-card rounded-lg p-8 text-center">
         <div class="mb-6">
          <svg class="w-16 h-16 mx-auto text-orange-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
         </div>
         <h3 id="feature3Title" class="text-2xl font-bold text-orange-400 mb-4">R√âSULTATS EN DIRECT</h3>
         <p id="feature3Desc" class="text-gray-300">Suivez les matchs en temps r√©el</p>
        </div>
       </div>
      </div>
     </section><!-- Footer -->
     <footer class="px-8 py-12 bg-black bg-opacity-80 border-t-2 border-orange-600">
      <div class="max-w-6xl mx-auto text-center">
       <p class="text-gray-500 mb-4">¬© 2024 CODM TOURNAMENT PLATFORM</p>
      </div>
     </footer>
    </div><!-- Create Tournament Page -->
    <div id="createTournamentPage" class="tactical-grid min-h-full" style="display: none;">
     <div class="px-8 py-12">
      <div class="max-w-4xl mx-auto">
       <div class="bg-gradient-to-br from-black to-orange-900 bg-opacity-40 border-2 border-orange-600 rounded-lg p-8">
        <h3 class="text-3xl font-bold text-orange-400 mb-6 text-center">Cr√©er un Nouveau Tournoi</h3>
        <form id="createTournamentForm" class="space-y-6"><!-- Tournament Name -->
         <div><label for="tournamentName" class="block text-orange-300 font-semibold mb-2">Nom du Tournoi</label> <input type="text" id="tournamentName" required class="w-full px-4 py-3 bg-black bg-opacity-60 border-2 border-orange-500 rounded-lg text-white focus:outline-none focus:border-orange-400" placeholder="Ex: Championship CODM 2024">
         </div><!-- Game Mode -->
         <div><label for="gameMode" class="block text-orange-300 font-semibold mb-2">Mode de Jeu</label> <select id="gameMode" required class="w-full px-4 py-3 bg-black bg-opacity-60 border-2 border-orange-500 rounded-lg text-white focus:outline-none focus:border-orange-400"> <option value="BR">Battle Royale (√âquipes de 4)</option> <option value="MJ">Multijoueur 5v5</option> <option value="1v1">1 vs 1</option> </select>
         </div><!-- Number of Teams -->
         <div><label for="maxTeams" class="block text-orange-300 font-semibold mb-2">Nombre Maximum d'√âquipes</label> <select id="maxTeams" required class="w-full px-4 py-3 bg-black bg-opacity-60 border-2 border-orange-500 rounded-lg text-white focus:outline-none focus:border-orange-400"> <option value="4">4 √©quipes</option> <option value="8" selected>8 √©quipes</option> <option value="16">16 √©quipes</option> <option value="32">32 √©quipes</option> </select>
          <p id="teamSizeInfo" class="text-sm text-gray-400 mt-2">Mode BR: 4 joueurs par √©quipe</p>
         </div><!-- Tournament Format -->
         <div><label for="format" class="block text-orange-300 font-semibold mb-2">Format</label> <select id="format" required class="w-full px-4 py-3 bg-black bg-opacity-60 border-2 border-orange-500 rounded-lg text-white focus:outline-none focus:border-orange-400"> <option value="single">Simple √âlimination</option> <option value="double">Double √âlimination</option> </select>
         </div><!-- Submit Button --> <button type="submit" id="createTournamentBtn" class="w-full btn-glow px-8 py-4 bg-gradient-to-r from-orange-600 to-red-600 text-white font-bold text-xl uppercase tracking-wider rounded-lg hover:from-orange-500 hover:to-red-500 transition-all"> Cr√©er le Tournoi </button>
        </form>
       </div>
      </div>
     </div>
    </div><!-- Tournaments List Page -->
    <div id="tournamentsPage" class="tactical-grid min-h-full" style="display: none;">
     <div class="px-8 py-12">
      <div class="max-w-7xl mx-auto">
       <h3 class="text-4xl font-bold text-orange-500 glow-text mb-8 text-center">MES TOURNOIS</h3>
       <div id="tournamentsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
      </div>
     </div>
    </div><!-- Dashboard Page -->
    <div id="dashboardPage" class="tactical-grid min-h-full" style="display: none;">
     <div class="px-8 py-12">
      <div class="max-w-7xl mx-auto">
       <h3 class="text-4xl font-bold text-orange-500 glow-text mb-8 text-center">TABLEAU DE BORD</h3><!-- Stats Cards -->
       <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-12">
        <div class="feature-card rounded-lg p-6 text-center">
         <svg class="w-12 h-12 mx-auto mb-3 text-orange-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
         </svg>
         <div class="text-3xl font-bold text-orange-400 mb-2" id="totalTournaments">
          0
         </div>
         <p class="text-gray-300">Tournois Cr√©√©s</p>
        </div>
        <div class="feature-card rounded-lg p-6 text-center">
         <svg class="w-12 h-12 mx-auto mb-3 text-orange-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
         </svg>
         <div class="text-3xl font-bold text-orange-400 mb-2" id="totalTeams">
          0
         </div>
         <p class="text-gray-300">√âquipes Inscrites</p>
        </div>
        <div class="feature-card rounded-lg p-6 text-center">
         <svg class="w-12 h-12 mx-auto mb-3 text-orange-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
         </svg>
         <div class="text-3xl font-bold text-orange-400 mb-2" id="activeTournaments">
          0
         </div>
         <p class="text-gray-300">Tournois Actifs</p>
        </div>
        <div class="feature-card rounded-lg p-6 text-center">
         <svg class="w-12 h-12 mx-auto mb-3 text-orange-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
         </svg>
         <div class="text-3xl font-bold text-orange-400 mb-2" id="completedTournaments">
          0
         </div>
         <p class="text-gray-300">Tournois Termin√©s</p>
        </div>
       </div><!-- Recent Activity -->
       <div class="bg-gradient-to-br from-black to-orange-900 bg-opacity-40 border-2 border-orange-600 rounded-lg p-8">
        <h4 class="text-2xl font-bold text-orange-400 mb-6">Activit√© R√©cente</h4>
        <div id="recentActivity" class="space-y-4"></div>
       </div>
      </div>
     </div>
    </div><!-- Profile Page -->
    <div id="profilePage" class="tactical-grid min-h-full" style="display: none;">
     <div class="px-8 py-12">
      <div class="max-w-4xl mx-auto">
       <h3 class="text-4xl font-bold text-orange-500 glow-text mb-8 text-center">MON PROFIL</h3>
       <div class="grid grid-cols-1 lg:grid-cols-3 gap-8"><!-- Profile Card -->
        <div class="lg:col-span-1">
         <div class="bg-gradient-to-br from-black to-orange-900 bg-opacity-40 border-2 border-orange-600 rounded-lg p-6 text-center">
          <div class="w-32 h-32 mx-auto mb-4 rounded-full bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center text-white text-5xl font-bold">
           O
          </div>
          <h4 class="text-2xl font-bold text-orange-400 mb-2">Organisateur</h4>
          <p class="text-gray-300 mb-4">Compte Pro Tier</p>
          <div class="inline-block px-4 py-2 bg-gradient-to-r from-orange-600 to-red-600 rounded-lg"><span class="text-white font-bold">‚≠ê PREMIUM</span>
          </div>
         </div>
        </div><!-- Profile Info -->
        <div class="lg:col-span-2">
         <div class="bg-gradient-to-br from-black to-orange-900 bg-opacity-40 border-2 border-orange-600 rounded-lg p-6">
          <h4 class="text-2xl font-bold text-orange-400 mb-6">Informations</h4>
          <form id="profileForm" class="space-y-4">
           <div><label class="block text-orange-300 font-semibold mb-2">Nom d'utilisateur</label> <input type="text" value="Organisateur" class="w-full px-4 py-3 bg-black bg-opacity-60 border-2 border-orange-500 rounded-lg text-white focus:outline-none focus:border-orange-400">
           </div>
           <div><label class="block text-orange-300 font-semibold mb-2">Email</label> <input type="email" value="organisateur@codm.pro" class="w-full px-4 py-3 bg-black bg-opacity-60 border-2 border-orange-500 rounded-lg text-white focus:outline-none focus:border-orange-400">
           </div>
           <div><label class="block text-orange-300 font-semibold mb-2">IGN (In-Game Name)</label> <input type="text" value="ProOrganizer" class="w-full px-4 py-3 bg-black bg-opacity-60 border-2 border-orange-500 rounded-lg text-white focus:outline-none focus:border-orange-400">
           </div><button type="submit" class="w-full btn-glow px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white font-bold uppercase rounded-lg hover:from-orange-500 hover:to-red-500"> Sauvegarder </button>
          </form>
         </div><!-- Stats -->
         <div class="mt-6 bg-gradient-to-br from-black to-orange-900 bg-opacity-40 border-2 border-orange-600 rounded-lg p-6">
          <h4 class="text-2xl font-bold text-orange-400 mb-4">Statistiques</h4>
          <div class="grid grid-cols-2 gap-4">
           <div class="text-center p-4 bg-black bg-opacity-40 rounded">
            <div class="text-2xl font-bold text-orange-400" id="profileTournaments">
             0
            </div>
            <p class="text-gray-300 text-sm">Tournois</p>
           </div>
           <div class="text-center p-4 bg-black bg-opacity-40 rounded">
            <div class="text-2xl font-bold text-orange-400" id="profileTeams">
             0
            </div>
            <p class="text-gray-300 text-sm">√âquipes</p>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
    </div><!-- Premium Page -->
    <div id="premiumPage" class="tactical-grid min-h-full" style="display: none;">
     <div class="px-8 py-12">
      <div class="max-w-6xl mx-auto">
       <div class="text-center mb-12">
        <h3 class="text-5xl font-bold text-orange-500 glow-text mb-4">‚ú® PASSEZ AU PREMIUM ‚ú®</h3>
        <p class="text-xl text-gray-300">D√©bloquez toutes les fonctionnalit√©s pour une exp√©rience ultime</p>
       </div><!-- Pricing Cards -->
       <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12"><!-- Free Plan -->
        <div class="bg-gradient-to-br from-black to-gray-900 bg-opacity-60 border-2 border-gray-600 rounded-lg p-8">
         <h4 class="text-2xl font-bold text-gray-300 mb-4 text-center">GRATUIT</h4>
         <div class="text-center mb-6"><span class="text-5xl font-bold text-gray-300">0‚Ç¨</span> <span class="text-gray-400">/mois</span>
         </div>
         <ul class="space-y-3 mb-8">
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-gray-300">3 tournois maximum</span></li>
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-gray-300">8 √©quipes par tournoi</span></li>
          <li class="flex items-start space-x-2"><span class="text-red-500">‚úó</span> <span class="text-gray-500">Tirage al√©atoire</span></li>
          <li class="flex items-start space-x-2"><span class="text-red-500">‚úó</span> <span class="text-gray-500">Support prioritaire</span></li>
         </ul><button disabled class="w-full px-6 py-3 bg-gray-700 text-gray-400 font-bold uppercase rounded-lg cursor-not-allowed"> Plan Actuel </button>
        </div><!-- Pro Plan -->
        <div class="bg-gradient-to-br from-orange-900 to-red-900 bg-opacity-60 border-4 border-orange-500 rounded-lg p-8 transform scale-105 shadow-2xl">
         <div class="text-center mb-4"><span class="inline-block px-4 py-1 bg-orange-500 text-white font-bold rounded-full text-sm">POPULAIRE</span>
         </div>
         <h4 class="text-2xl font-bold text-orange-400 mb-4 text-center">PRO</h4>
         <div class="text-center mb-6"><span class="text-5xl font-bold text-orange-400">9.99‚Ç¨</span> <span class="text-gray-300">/mois</span>
         </div>
         <ul class="space-y-3 mb-8">
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-white font-semibold">20 tournois</span></li>
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-white font-semibold">32 √©quipes par tournoi</span></li>
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-white font-semibold">Tirage al√©atoire</span></li>
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-white font-semibold">Export PDF brackets</span></li>
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-white font-semibold">Support prioritaire</span></li>
         </ul><button class="w-full btn-glow px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white font-bold uppercase rounded-lg hover:from-orange-500 hover:to-red-500"> Choisir Pro </button>
        </div><!-- Elite Plan -->
        <div class="bg-gradient-to-br from-black to-purple-900 bg-opacity-60 border-2 border-purple-600 rounded-lg p-8">
         <h4 class="text-2xl font-bold text-purple-400 mb-4 text-center">ELITE</h4>
         <div class="text-center mb-6"><span class="text-5xl font-bold text-purple-400">19.99‚Ç¨</span> <span class="text-gray-300">/mois</span>
         </div>
         <ul class="space-y-3 mb-8">
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-white font-semibold">Tournois illimit√©s</span></li>
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-white font-semibold">√âquipes illimit√©es</span></li>
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-white font-semibold">Export PDF brackets</span></li>
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-white font-semibold">Support VIP 24/7</span></li>
          <li class="flex items-start space-x-2"><span class="text-green-500">‚úì</span> <span class="text-white font-semibold">Personnalisation totale</span></li>
         </ul><button class="w-full btn-glow px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold uppercase rounded-lg hover:from-purple-500 hover:to-pink-500"> Choisir Elite </button>
        </div>
       </div><!-- Features Comparison -->
       <div class="bg-gradient-to-br from-black to-orange-900 bg-opacity-40 border-2 border-orange-600 rounded-lg p-8">
        <h4 class="text-2xl font-bold text-orange-400 mb-6 text-center">Comparaison des Fonctionnalit√©s</h4>
        <div class="overflow-x-auto">
         <table class="w-full text-left">
          <thead>
           <tr class="border-b-2 border-orange-600">
            <th class="py-3 px-4 text-orange-300">Fonctionnalit√©</th>
            <th class="py-3 px-4 text-center text-gray-300">Gratuit</th>
            <th class="py-3 px-4 text-center text-orange-300">Pro</th>
            <th class="py-3 px-4 text-center text-purple-300">Elite</th>
           </tr>
          </thead>
          <tbody class="text-gray-300">
           <tr class="border-b border-orange-900">
            <td class="py-3 px-4">Nombre de tournois</td>
            <td class="py-3 px-4 text-center">3</td>
            <td class="py-3 px-4 text-center">20</td>
            <td class="py-3 px-4 text-center">Illimit√©</td>
           </tr>
           <tr class="border-b border-orange-900">
            <td class="py-3 px-4">√âquipes par tournoi</td>
            <td class="py-3 px-4 text-center">8</td>
            <td class="py-3 px-4 text-center">32</td>
            <td class="py-3 px-4 text-center">Illimit√©</td>
           </tr>
           <tr class="border-b border-orange-900">
            <td class="py-3 px-4">Tirage al√©atoire</td>
            <td class="py-3 px-4 text-center">‚ùå</td>
            <td class="py-3 px-4 text-center">‚úÖ</td>
            <td class="py-3 px-4 text-center">‚úÖ</td>
           </tr>
           <tr class="border-b border-orange-900">
            <td class="py-3 px-4">Export PDF</td>
            <td class="py-3 px-4 text-center">‚ùå</td>
            <td class="py-3 px-4 text-center">‚úÖ</td>
            <td class="py-3 px-4 text-center">‚úÖ</td>
           </tr>
           <tr class="border-b border-orange-900">
            <td class="py-3 px-4">Support technique</td>
            <td class="py-3 px-4 text-center">Email</td>
            <td class="py-3 px-4 text-center">Prioritaire</td>
            <td class="py-3 px-4 text-center">VIP 24/7</td>
           </tr>
           <tr>
            <td class="py-3 px-4">Personnalisation</td>
            <td class="py-3 px-4 text-center">‚ùå</td>
            <td class="py-3 px-4 text-center">‚úÖ</td>
            <td class="py-3 px-4 text-center">‚úÖ‚úÖ</td>
           </tr>
          </tbody>
         </table>
        </div>
       </div>
      </div>
     </div>
    </div><!-- Tournament Details Page -->
    <div id="tournamentDetailsPage" class="tactical-grid min-h-full" style="display: none;">
     <div class="bg-black bg-opacity-60 border-b-2 border-orange-600 px-8 py-6">
      <div class="max-w-7xl mx-auto flex items-center justify-between"><button onclick="showPage('tournaments')" class="flex items-center space-x-2 text-orange-500 hover:text-orange-400 transition-colors">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg><span class="font-semibold">Retour</span> </button>
       <h2 id="tournamentDetailsTitle" class="text-3xl font-bold text-orange-500 glow-text"></h2>
       <div class="w-24"></div>
      </div>
     </div><!-- Tab Navigation -->
     <div class="bg-black bg-opacity-40 border-b-2 border-orange-600">
      <div class="max-w-7xl mx-auto px-8">
       <div class="flex justify-between items-center">
        <div class="flex space-x-6"><button onclick="showTab('teams')" class="tab-btn active px-6 py-4 font-bold text-orange-400 border-b-4 border-orange-500">√âQUIPES</button> <button onclick="showTab('bracket')" class="tab-btn px-6 py-4 font-bold text-gray-400 border-b-4 border-transparent hover:text-orange-400">BRACKET</button>
        </div>
        <div class="flex space-x-4"><button id="randomDrawBtn" onclick="performRandomDraw()" style="display: none;" class="btn-glow px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold uppercase rounded-lg hover:from-purple-500 hover:to-pink-500 flex items-center space-x-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
          </svg><span>Tirage Al√©atoire</span> </button> <button id="exportPdfBtn" onclick="exportBracketToPDF()" style="display: none;" class="btn-glow px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold uppercase rounded-lg hover:from-green-500 hover:to-teal-500 flex items-center space-x-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg><span>Export PDF</span> </button>
        </div>
       </div>
      </div>
     </div><!-- Teams Tab -->
     <div id="teamsTab" class="px-8 py-12">
      <div class="max-w-7xl mx-auto">
       <div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><!-- Team Registration Form -->
        <div class="bg-gradient-to-br from-black to-orange-900 bg-opacity-40 border-2 border-orange-600 rounded-lg p-6">
         <h4 class="text-2xl font-bold text-orange-400 mb-6">Inscription d'√âquipe</h4>
         <form id="teamRegistrationForm" class="space-y-4">
          <div><label for="teamName" class="block text-orange-300 font-semibold mb-2">Nom de l'√âquipe</label> <input type="text" id="teamName" required class="w-full px-4 py-2 bg-black bg-opacity-60 border-2 border-orange-500 rounded text-white focus:outline-none focus:border-orange-400">
          </div>
          <div><label for="teamLeader" class="block text-orange-300 font-semibold mb-2">Chef d'√âquipe (IGN)</label> <input type="text" id="teamLeader" required class="w-full px-4 py-2 bg-black bg-opacity-60 border-2 border-orange-500 rounded text-white focus:outline-none focus:border-orange-400">
          </div>
          <div><label for="teamPhone" class="block text-orange-300 font-semibold mb-2">Num√©ro de T√©l√©phone</label> <input type="tel" id="teamPhone" required pattern="[0-9+\s\-()]+" class="w-full px-4 py-2 bg-black bg-opacity-60 border-2 border-orange-500 rounded text-white focus:outline-none focus:border-orange-400" placeholder="+33 6 12 34 56 78">
          </div>
          <div id="membersContainer"></div><button type="submit" id="registerTeamBtn" class="w-full btn-glow px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white font-bold uppercase rounded hover:from-orange-500 hover:to-red-500"> Inscrire l'√âquipe </button>
         </form>
        </div><!-- Registered Teams List -->
        <div>
         <div class="bg-gradient-to-br from-black to-orange-900 bg-opacity-40 border-2 border-orange-600 rounded-lg p-6">
          <h4 class="text-2xl font-bold text-orange-400 mb-4">√âquipes Inscrites</h4>
          <div id="registeredTeamsList" class="space-y-4"></div>
         </div>
        </div>
       </div>
      </div>
     </div><!-- Bracket Tab -->
     <div id="bracketTab" class="px-8 py-12" style="display: none;">
      <div class="max-w-7xl mx-auto">
       <div id="bracketContainer" class="overflow-x-auto pb-8"></div>
       <div id="winnerSection" class="text-center mt-12" style="display: none;">
        <div class="bg-gradient-to-br from-orange-900 to-red-900 border-4 border-orange-500 rounded-lg p-12 max-w-2xl mx-auto">
         <svg class="w-32 h-32 mx-auto mb-6 text-orange-400" fill="currentColor" viewbox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
         </svg>
         <h4 class="text-5xl font-bold text-orange-400 glow-text mb-4">üèÜ CHAMPION üèÜ</h4>
         <p id="winnerName" class="text-4xl font-bold text-white mb-6"></p>
         <p class="text-gray-300 mb-6">Tournoi termin√© et r√©sultats sauvegard√©s !</p><button onclick="showPage('tournaments')" class="btn-glow px-8 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white font-bold uppercase rounded-lg"> Retour aux Tournois </button>
        </div>
       </div>
      </div>
     </div>
    </div>
   </main>
  </div>
  <div id="toastContainer"></div>
  <script>
        const defaultConfig = {
            background_color: '#0a0a0a',
            surface_color: '#000000',
            text_color: '#d1d5db',
            primary_action_color: '#ff4500',
            secondary_action_color: '#ffa500',
            site_title: 'CODM TOURNAMENTS',
            hero_title: 'BIENVENUE ORGANISATEUR',
            hero_subtitle: 'Organisez vos tournois comp√©titifs',
            feature1_title: 'CR√âER DES TOURNOIS',
            feature1_desc: 'Organisez vos propres tournois avec brackets personnalis√©s',
            feature2_title: 'GESTION D\'√âQUIPES',
            feature2_desc: 'Inscrivez et g√©rez vos √©quipes',
            feature3_title: 'R√âSULTATS EN DIRECT',
            feature3_desc: 'Suivez les matchs en temps r√©el',
            cta_button: 'CR√âER UN TOURNOI'
        };

        let allData = [];
        let currentTournamentId = null;
        let currentView = 'home';

        const dataHandler = {
            onDataChanged(data) {
                allData = data;
                
                if (currentView === 'tournaments') {
                    renderTournamentsList();
                } else if (currentView === 'tournamentDetails') {
                    renderTournamentDetails();
                } else if (currentView === 'dashboard') {
                    updateDashboard();
                } else if (currentView === 'profile') {
                    updateProfile();
                }
            }
        };

        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast px-6 py-4 rounded-lg shadow-lg ${type === 'success' ? 'bg-green-600' : 'bg-red-600'} text-white font-semibold`;
            toast.textContent = message;
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function getTeamSize(gameMode) {
            if (gameMode === 'BR') return 4;
            if (gameMode === 'MJ') return 5;
            return 1;
        }

        function showPage(page) {
            document.querySelectorAll('main > div').forEach(div => div.style.display = 'none');
            
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            
            currentView = page;
            
            if (page === 'home') {
                document.getElementById('homePage').style.display = 'block';
            } else if (page === 'dashboard') {
                document.getElementById('dashboardPage').style.display = 'block';
                updateDashboard();
            } else if (page === 'createTournament') {
                document.getElementById('createTournamentPage').style.display = 'block';
            } else if (page === 'tournaments') {
                document.getElementById('tournamentsPage').style.display = 'block';
                renderTournamentsList();
            } else if (page === 'tournamentDetails') {
                document.getElementById('tournamentDetailsPage').style.display = 'block';
                renderTournamentDetails();
            } else if (page === 'profile') {
                document.getElementById('profilePage').style.display = 'block';
                updateProfile();
            } else if (page === 'premium') {
                document.getElementById('premiumPage').style.display = 'block';
            }
        }

        function updateDashboard() {
            const tournaments = allData.filter(d => d.tournament_id && !d.team_name && !d.match_id);
            const teams = allData.filter(d => d.team_name);
            const activeTournaments = tournaments.filter(t => t.status === 'open' || t.status === 'ongoing');
            const completedTournaments = tournaments.filter(t => t.status === 'completed');
            
            document.getElementById('totalTournaments').textContent = tournaments.length;
            document.getElementById('totalTeams').textContent = teams.length;
            document.getElementById('activeTournaments').textContent = activeTournaments.length;
            document.getElementById('completedTournaments').textContent = completedTournaments.length;
            
            const recentActivityContainer = document.getElementById('recentActivity');
            if (tournaments.length === 0) {
                recentActivityContainer.innerHTML = '<p class="text-center text-gray-400">Aucune activit√© r√©cente</p>';
                return;
            }
            
            const sortedTournaments = [...tournaments].sort((a, b) => {
                return new Date(b.created_at) - new Date(a.created_at);
            }).slice(0, 5);
            
            recentActivityContainer.innerHTML = sortedTournaments.map(t => {
                const tournamentTeams = allData.filter(d => d.tournament_id === t.tournament_id && d.team_name);
                return `
                    <div class="flex items-center justify-between bg-black bg-opacity-40 p-4 rounded-lg">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                                </svg>
                            </div>
                            <div>
                                <h5 class="text-lg font-bold text-orange-400">${t.tournament_name}</h5>
                                <p class="text-sm text-gray-400">${tournamentTeams.length} √©quipes inscrites</p>
                            </div>
                        </div>
                        <button onclick="viewTournament('${t.tournament_id}')" class="px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white font-semibold rounded transition-all">
                            Voir
                        </button>
                    </div>
                `;
            }).join('');
        }

        function updateProfile() {
            const tournaments = allData.filter(d => d.tournament_id && !d.team_name && !d.match_id);
            const teams = allData.filter(d => d.team_name);
            
            document.getElementById('profileTournaments').textContent = tournaments.length;
            document.getElementById('profileTeams').textContent = teams.length;
        }

        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            showToast('Profil sauvegard√© avec succ√®s !');
        });

        document.getElementById('gameMode').addEventListener('change', function() {
            const mode = this.value;
            const teamSizeInfo = document.getElementById('teamSizeInfo');
            const size = getTeamSize(mode);
            
            if (mode === 'BR') {
                teamSizeInfo.textContent = `Mode BR: ${size} joueurs par √©quipe`;
            } else if (mode === 'MJ') {
                teamSizeInfo.textContent = `Mode Multijoueur: ${size} joueurs par √©quipe`;
            } else {
                teamSizeInfo.textContent = 'Mode 1v1: 1 joueur par √©quipe';
            }
        });

        document.getElementById('createTournamentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const btn = document.getElementById('createTournamentBtn');
            btn.disabled = true;
            btn.textContent = 'Cr√©ation en cours...';
            
            const tournamentId = generateId();
            const name = document.getElementById('tournamentName').value;
            const gameMode = document.getElementById('gameMode').value;
            const maxTeams = parseInt(document.getElementById('maxTeams').value);
            const format = document.getElementById('format').value;
            const teamSize = getTeamSize(gameMode);
            
            const result = await window.dataSdk.create({
                tournament_id: tournamentId,
                tournament_name: name,
                game_mode: gameMode,
                team_size: teamSize,
                max_teams: maxTeams,
                format: format,
                status: 'open',
                created_at: new Date().toISOString(),
                team_name: null,
                team_leader: null,
                team_phone: null,
                team_members: null,
                match_id: null,
                round: null,
                team1_id: null,
                team2_id: null,
                score1: null,
                score2: null,
                winner_id: null,
                completed_at: null
            });
            
            btn.disabled = false;
            btn.textContent = 'Cr√©er le Tournoi';
            
            if (result.isOk) {
                showToast('Tournoi cr√©√© avec succ√®s !');
                this.reset();
                currentTournamentId = tournamentId;
                showPage('tournamentDetails');
            } else {
                showToast('Erreur lors de la cr√©ation', 'error');
            }
        });

        function renderTournamentsList() {
            const container = document.getElementById('tournamentsList');
            const tournaments = allData.filter(d => d.tournament_id && !d.team_name && !d.match_id);
            
            if (tournaments.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-400 col-span-full">Aucun tournoi cr√©√©</p>';
                return;
            }
            
            container.innerHTML = tournaments.map(t => {
                const teams = allData.filter(d => d.tournament_id === t.tournament_id && d.team_name);
                const gameModeLabel = t.game_mode === 'BR' ? 'Battle Royale' : t.game_mode === 'MJ' ? 'Multijoueur 5v5' : '1v1';
                
                return `
                    <div class="feature-card rounded-lg p-6 cursor-pointer" onclick="viewTournament('${t.tournament_id}')">
                        <h4 class="text-2xl font-bold text-orange-400 mb-3">${t.tournament_name}</h4>
                        <div class="space-y-2 text-gray-300">
                            <p><span class="text-orange-300">Mode:</span> ${gameModeLabel}</p>
                            <p><span class="text-orange-300">Format:</span> ${t.format === 'single' ? 'Simple √âlimination' : 'Double √âlimination'}</p>
                            <p><span class="text-orange-300">√âquipes:</span> ${teams.length}/${t.max_teams}</p>
                            <p><span class="text-orange-300">Statut:</span> <span class="text-green-400">${t.status === 'open' ? 'Inscriptions ouvertes' : t.status === 'ongoing' ? 'En cours' : 'Termin√©'}</span></p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function viewTournament(tournamentId) {
            currentTournamentId = tournamentId;
            showPage('tournamentDetails');
        }

        function renderTournamentDetails() {
            if (!currentTournamentId) return;
            
            const tournament = allData.find(d => d.tournament_id === currentTournamentId && !d.team_name && !d.match_id);
            if (!tournament) return;
            
            document.getElementById('tournamentDetailsTitle').textContent = tournament.tournament_name;
            
            const membersContainer = document.getElementById('membersContainer');
            membersContainer.innerHTML = '';
            
            for (let i = 0; i < tournament.team_size; i++) {
                const div = document.createElement('div');
                div.innerHTML = `
                    <label for="member${i}" class="block text-orange-300 font-semibold mb-2">Membre ${i + 1} (IGN)</label>
                    <input type="text" id="member${i}" required class="w-full px-4 py-2 bg-black bg-opacity-60 border-2 border-orange-500 rounded text-white focus:outline-none focus:border-orange-400">
                `;
                membersContainer.appendChild(div);
            }
            
            const teams = allData.filter(d => d.tournament_id === currentTournamentId && d.team_name);
            const matches = allData.filter(d => d.tournament_id === currentTournamentId && d.match_id);
            
            const drawBtn = document.getElementById('randomDrawBtn');
            if (teams.length >= 2 && matches.length === 0) {
                drawBtn.style.display = 'flex';
            } else {
                drawBtn.style.display = 'none';
            }
            
            const exportBtn = document.getElementById('exportPdfBtn');
            if (matches.length > 0) {
                exportBtn.style.display = 'flex';
            } else {
                exportBtn.style.display = 'none';
            }
            
            renderRegisteredTeams();
        }

        function renderRegisteredTeams() {
            const container = document.getElementById('registeredTeamsList');
            const teams = allData.filter(d => d.tournament_id === currentTournamentId && d.team_name);
            
            if (teams.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-center">Aucune √©quipe inscrite</p>';
                return;
            }
            
            container.innerHTML = teams.map(team => {
                const members = team.team_members.split(',');
                return `
                    <div class="bg-black bg-opacity-60 border-2 border-orange-500 rounded p-4">
                        <h5 class="text-xl font-bold text-orange-400 mb-2">${team.team_name}</h5>
                        <p class="text-gray-300 mb-1"><span class="text-orange-300">Chef:</span> ${team.team_leader}</p>
                        <p class="text-gray-300 mb-2"><span class="text-orange-300">T√©l:</span> ${team.team_phone}</p>
                        <p class="text-gray-300 text-sm"><span class="text-orange-300">Membres:</span> ${members.join(', ')}</p>
                    </div>
                `;
            }).join('');
        }

        document.getElementById('teamRegistrationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const tournament = allData.find(d => d.tournament_id === currentTournamentId && !d.team_name && !d.match_id);
            if (!tournament) return;
            
            const teams = allData.filter(d => d.tournament_id === currentTournamentId && d.team_name);
            if (teams.length >= tournament.max_teams) {
                showToast('Le tournoi est complet !', 'error');
                return;
            }
            
            const btn = document.getElementById('registerTeamBtn');
            btn.disabled = true;
            btn.textContent = 'Inscription en cours...';
            
            const teamName = document.getElementById('teamName').value;
            const teamLeader = document.getElementById('teamLeader').value;
            const teamPhone = document.getElementById('teamPhone').value;
            const members = [];
            
            for (let i = 0; i < tournament.team_size; i++) {
                members.push(document.getElementById(`member${i}`).value);
            }
            
            const result = await window.dataSdk.create({
                tournament_id: currentTournamentId,
                tournament_name: tournament.tournament_name,
                game_mode: tournament.game_mode,
                team_size: tournament.team_size,
                max_teams: tournament.max_teams,
                format: tournament.format,
                status: tournament.status,
                created_at: tournament.created_at,
                team_name: teamName,
                team_leader: teamLeader,
                team_phone: teamPhone,
                team_members: members.join(','),
                match_id: null,
                round: null,
                team1_id: null,
                team2_id: null,
                score1: null,
                score2: null,
                winner_id: null,
                completed_at: null
            });
            
            btn.disabled = false;
            btn.textContent = 'Inscrire l\'√âquipe';
            
            if (result.isOk) {
                showToast('√âquipe inscrite avec succ√®s !');
                this.reset();
            } else {
                showToast('Erreur lors de l\'inscription', 'error');
            }
        });

        function showTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active', 'text-orange-400', 'border-orange-500');
                btn.classList.add('text-gray-400', 'border-transparent');
            });
            
            event.target.classList.add('active', 'text-orange-400', 'border-orange-500');
            event.target.classList.remove('text-gray-400', 'border-transparent');
            
            document.getElementById('teamsTab').style.display = tab === 'teams' ? 'block' : 'none';
            document.getElementById('bracketTab').style.display = tab === 'bracket' ? 'block' : 'none';
            
            if (tab === 'bracket') {
                generateAndDisplayBracket();
            }
        }

        function generateAndDisplayBracket() {
            const teams = allData.filter(d => d.tournament_id === currentTournamentId && d.team_name);
            const tournament = allData.find(d => d.tournament_id === currentTournamentId && !d.team_name && !d.match_id);
            
            if (!tournament || teams.length < 2) {
                document.getElementById('bracketContainer').innerHTML = '<p class="text-center text-gray-400">Pas assez d\'√©quipes pour g√©n√©rer un bracket (minimum 2)</p>';
                return;
            }
            
            const matches = allData.filter(d => d.tournament_id === currentTournamentId && d.match_id);
            
            if (matches.length === 0) {
                generateMatches(teams, tournament);
            } else {
                displayBracket();
            }
        }

        async function generateMatches(teams, tournament) {
            const numTeams = Math.pow(2, Math.ceil(Math.log2(teams.length)));
            const numRounds = Math.log2(numTeams);
            
            for (let i = 0; i < numTeams / 2; i++) {
                const team1 = teams[i * 2] || null;
                const team2 = teams[i * 2 + 1] || null;
                
                await window.dataSdk.create({
                    tournament_id: currentTournamentId,
                    tournament_name: tournament.tournament_name,
                    game_mode: tournament.game_mode,
                    team_size: tournament.team_size,
                    max_teams: tournament.max_teams,
                    format: tournament.format,
                    status: tournament.status,
                    created_at: tournament.created_at,
                    team_name: null,
                    team_leader: null,
                    team_phone: null,
                    team_members: null,
                    match_id: `${currentTournamentId}_m${i}`,
                    round: 1,
                    team1_id: team1 ? team1.__backendId : null,
                    team2_id: team2 ? team2.__backendId : null,
                    score1: null,
                    score2: null,
                    winner_id: null,
                    completed_at: null
                });
            }
        }

        async function performRandomDraw() {
            const tournament = allData.find(d => d.tournament_id === currentTournamentId && !d.team_name && !d.match_id);
            const teams = allData.filter(d => d.tournament_id === currentTournamentId && d.team_name);
            
            if (!tournament || teams.length < 2) {
                showToast('Pas assez d\'√©quipes pour le tirage', 'error');
                return;
            }
            
            const drawBtn = document.getElementById('randomDrawBtn');
            drawBtn.disabled = true;
            drawBtn.innerHTML = '<span>Tirage en cours...</span>';
            
            const shuffledTeams = [...teams].sort(() => Math.random() - 0.5);
            
            await generateMatches(shuffledTeams, tournament);
            
            showToast('Tirage au sort effectu√© ! üé≤');
            
            drawBtn.disabled = false;
            drawBtn.style.display = 'none';
            
            showTab('bracket');
        }

        function displayBracket() {
            const matches = allData.filter(d => d.tournament_id === currentTournamentId && d.match_id);
            const teams = allData.filter(d => d.tournament_id === currentTournamentId && d.team_name);
            
            const rounds = {};
            matches.forEach(m => {
                if (!rounds[m.round]) rounds[m.round] = [];
                rounds[m.round].push(m);
            });
            
            const maxRound = Math.max(...Object.keys(rounds).map(Number));
            
            let html = '<div class="flex justify-center items-start space-x-8 min-w-max">';
            
            for (let round = 1; round <= maxRound; round++) {
                const roundMatches = rounds[round] || [];
                html += `
                    <div class="flex flex-col justify-around space-y-6">
                        <h4 class="text-center text-xl font-bold text-orange-400 mb-4">
                            ${round === maxRound ? 'FINALE' : `ROUND ${round}`}
                        </h4>
                `;
                
                roundMatches.forEach(match => {
                    html += createMatchCard(match, teams);
                });
                
                html += '</div>';
            }
            
            html += '</div>';
            document.getElementById('bracketContainer').innerHTML = html;
        }

        function createMatchCard(match, teams) {
            const team1 = teams.find(t => t.__backendId === match.team1_id);
            const team2 = teams.find(t => t.__backendId === match.team2_id);
            
            const team1Name = team1 ? team1.team_name : 'En attente...';
            const team2Name = team2 ? team2.team_name : 'En attente...';
            const canEnterScores = team1 && team2 && match.winner_id === null;
            
            return `
                <div class="bg-gradient-to-br from-black to-orange-900 bg-opacity-60 border-2 ${match.winner_id ? 'border-green-500' : 'border-orange-500'} rounded-lg p-4 w-64">
                    <div class="space-y-3">
                        <div class="flex items-center justify-between ${match.winner_id === match.team1_id ? 'bg-green-900 bg-opacity-40' : 'bg-black bg-opacity-40'} p-3 rounded">
                            <span class="text-white font-semibold">${team1Name}</span>
                            ${canEnterScores ? `
                                <input type="number" 
                                       id="score_${match.__backendId}_1" 
                                       min="0" 
                                       class="w-16 px-2 py-1 bg-orange-900 border border-orange-500 rounded text-white text-center"
                                       placeholder="0">
                            ` : `
                                <span class="text-orange-400 font-bold text-lg">${match.score1 !== null ? match.score1 : '-'}</span>
                            `}
                        </div>
                        
                        <div class="text-center text-orange-500 font-bold">VS</div>
                        
                        <div class="flex items-center justify-between ${match.winner_id === match.team2_id ? 'bg-green-900 bg-opacity-40' : 'bg-black bg-opacity-40'} p-3 rounded">
                            <span class="text-white font-semibold">${team2Name}</span>
                            ${canEnterScores ? `
                                <input type="number" 
                                       id="score_${match.__backendId}_2" 
                                       min="0" 
                                       class="w-16 px-2 py-1 bg-orange-900 border border-orange-500 rounded text-white text-center"
                                       placeholder="0">
                            ` : `
                                <span class="text-orange-400 font-bold text-lg">${match.score2 !== null ? match.score2 : '-'}</span>
                            `}
                        </div>
                        
                        ${canEnterScores ? `
                            <button onclick="submitScore('${match.__backendId}')" 
                                    class="w-full mt-2 px-4 py-2 bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-500 hover:to-red-500 text-white font-bold rounded transition-all">
                                Valider
                            </button>
                        ` : ''}
                        
                        ${match.winner_id ? `
                            <div class="text-center text-green-400 font-bold mt-2">
                                ‚úì Gagnant
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        async function submitScore(matchBackendId) {
            const match = allData.find(d => d.__backendId === matchBackendId);
            if (!match) return;
            
            const score1Input = document.getElementById(`score_${matchBackendId}_1`);
            const score2Input = document.getElementById(`score_${matchBackendId}_2`);
            
            const score1 = parseInt(score1Input.value);
            const score2 = parseInt(score2Input.value);
            
            if (isNaN(score1) || isNaN(score2)) {
                showToast('Veuillez entrer des scores valides', 'error');
                return;
            }
            
            if (score1 === score2) {
                showToast('Les scores ne peuvent pas √™tre √©gaux', 'error');
                return;
            }
            
            const winnerId = score1 > score2 ? match.team1_id : match.team2_id;
            
            const updatedMatch = {
                ...match,
                score1: score1,
                score2: score2,
                winner_id: winnerId,
                completed_at: new Date().toISOString()
            };
            
            const result = await window.dataSdk.update(updatedMatch);
            
            if (result.isOk) {
                showToast('Score enregistr√© !');
                
                const tournament = allData.find(d => d.tournament_id === currentTournamentId && !d.team_name && !d.match_id);
                const matches = allData.filter(d => d.tournament_id === currentTournamentId && d.match_id);
                const maxRound = Math.max(...matches.map(m => m.round));
                
                if (match.round === maxRound) {
                    const teams = allData.filter(d => d.tournament_id === currentTournamentId && d.team_name);
                    const winner = teams.find(t => t.__backendId === winnerId);
                    
                    if (winner) {
                        document.getElementById('winnerName').textContent = winner.team_name;
                        document.getElementById('winnerSection').style.display = 'block';
                        
                        const updatedTournament = {
                            ...tournament,
                            status: 'completed'
                        };
                        await window.dataSdk.update(updatedTournament);
                    }
                }
            } else {
                showToast('Erreur lors de l\'enregistrement', 'error');
            }
        }

        async function exportBracketToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF({
                orientation: 'landscape',
                unit: 'mm',
                format: 'a4'
            });
            
            const tournament = allData.find(d => d.tournament_id === currentTournamentId && !d.team_name && !d.match_id);
            const teams = allData.filter(d => d.tournament_id === currentTournamentId && d.team_name);
            const matches = allData.filter(d => d.tournament_id === currentTournamentId && d.match_id);
            
            if (!tournament || teams.length === 0) {
                showToast('Aucune donn√©e √† exporter', 'error');
                return;
            }
            
            doc.setFillColor(10, 10, 10);
            doc.rect(0, 0, 297, 210, 'F');
            
            doc.setTextColor(255, 69, 0);
            doc.setFontSize(24);
            doc.setFont(undefined, 'bold');
            doc.text(tournament.tournament_name, 148.5, 20, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setTextColor(255, 165, 0);
            const gameModeLabel = tournament.game_mode === 'BR' ? 'Battle Royale' : tournament.game_mode === 'MJ' ? 'Multijoueur 5v5' : '1v1';
            doc.text(`Mode: ${gameModeLabel} | Format: ${tournament.format === 'single' ? 'Simple √âlimination' : 'Double √âlimination'}`, 148.5, 30, { align: 'center' });
            
            doc.setDrawColor(255, 69, 0);
            doc.setLineWidth(0.5);
            doc.line(20, 35, 277, 35);
            
            let yPos = 50;
            doc.setFontSize(16);
            doc.setTextColor(255, 165, 0);
            doc.text('√âquipes Inscrites', 20, yPos);
            
            yPos += 10;
            doc.setFontSize(10);
            doc.setTextColor(209, 213, 219);
            
            teams.forEach((team, index) => {
                if (yPos > 180) {
                    doc.addPage();
                    doc.setFillColor(10, 10, 10);
                    doc.rect(0, 0, 297, 210, 'F');
                    yPos = 20;
                }
                
                doc.setDrawColor(255, 69, 0);
                doc.setFillColor(0, 0, 0);
                doc.roundedRect(20, yPos - 5, 120, 12, 2, 2, 'FD');
                
                doc.setTextColor(255, 165, 0);
                doc.setFont(undefined, 'bold');
                doc.text(`${index + 1}. ${team.team_name}`, 25, yPos);
                
                doc.setTextColor(209, 213, 219);
                doc.setFont(undefined, 'normal');
                doc.text(`Chef: ${team.team_leader}`, 25, yPos + 5);
                doc.text(`T√©l: ${team.team_phone}`, 25, yPos + 9);
                
                yPos += 18;
            });
            
            if (matches.length > 0) {
                doc.addPage();
                doc.setFillColor(10, 10, 10);
                doc.rect(0, 0, 297, 210, 'F');
                
                doc.setFontSize(16);
                doc.setTextColor(255, 165, 0);
                doc.text('Bracket du Tournoi', 148.5, 20, { align: 'center' });
                
                const rounds = {};
                matches.forEach(m => {
                    if (!rounds[m.round]) rounds[m.round] = [];
                    rounds[m.round].push(m);
                });
                
                const maxRound = Math.max(...Object.keys(rounds).map(Number));
                let xPos = 20;
                const columnWidth = (297 - 40) / maxRound;
                
                for (let round = 1; round <= maxRound; round++) {
                    const roundMatches = rounds[round] || [];
                    let yPos = 40;
                    const spacing = (180 - (roundMatches.length * 30)) / (roundMatches.length + 1);
                    
                    doc.setFontSize(12);
                    doc.setTextColor(255, 165, 0);
                    doc.setFont(undefined, 'bold');
                    const roundTitle = round === maxRound ? 'FINALE' : `ROUND ${round}`;
                    doc.text(roundTitle, xPos + columnWidth / 2, 35, { align: 'center' });
                    
                    roundMatches.forEach((match, index) => {
                        yPos += spacing;
                        
                        const team1 = teams.find(t => t.__backendId === match.team1_id);
                        const team2 = teams.find(t => t.__backendId === match.team2_id);
                        
                        const team1Name = team1 ? team1.team_name : 'En attente';
                        const team2Name = team2 ? team2.team_name : 'En attente';
                        
                        doc.setDrawColor(255, 69, 0);
                        if (match.winner_id) {
                            doc.setDrawColor(34, 197, 94);
                        }
                        doc.setFillColor(0, 0, 0);
                        doc.roundedRect(xPos, yPos, columnWidth - 10, 25, 2, 2, 'FD');
                        
                        doc.setFontSize(9);
                        doc.setTextColor(255, 255, 255);
                        doc.setFont(undefined, match.winner_id === match.team1_id ? 'bold' : 'normal');
                        doc.text(team1Name.substring(0, 18), xPos + 3, yPos + 6);
                        
                        doc.setTextColor(255, 165, 0);
                        const score1 = match.score1 !== null ? match.score1.toString() : '-';
                        doc.text(score1, xPos + columnWidth - 15, yPos + 6);
                        
                        doc.setTextColor(255, 165, 0);
                        doc.setFont(undefined, 'bold');
                        doc.text('VS', xPos + columnWidth / 2, yPos + 12.5, { align: 'center' });
                        
                        doc.setTextColor(255, 255, 255);
                        doc.setFont(undefined, match.winner_id === match.team2_id ? 'bold' : 'normal');
                        doc.text(team2Name.substring(0, 18), xPos + 3, yPos + 19);
                        
                        doc.setTextColor(255, 165, 0);
                        const score2 = match.score2 !== null ? match.score2.toString() : '-';
                        doc.text(score2, xPos + columnWidth - 15, yPos + 19);
                        
                        yPos += 25;
                    });
                    
                    xPos += columnWidth;
                }
            }
            
            doc.setFontSize(8);
            doc.setTextColor(107, 114, 128);
            doc.text('¬© 2024 CODM Tournament Platform', 148.5, 205, { align: 'center' });
            doc.text(`G√©n√©r√© le ${new Date().toLocaleDateString('fr-FR')} √† ${new Date().toLocaleTimeString('fr-FR')}`, 148.5, 208, { align: 'center' });
            
            const fileName = `${tournament.tournament_name.replace(/[^a-z0-9]/gi, '_')}_bracket.pdf`;
            doc.save(fileName);
            
            showToast('PDF export√© avec succ√®s ! üìÑ');
        }

        async function onConfigChange(config) {
            const mainWrapper = document.querySelector('.main-wrapper');
            if (mainWrapper) {
                mainWrapper.style.backgroundColor = config.background_color || defaultConfig.background_color;
            }

            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                sidebar.style.backgroundColor = config.surface_color || defaultConfig.surface_color;
            }

            const textElements = document.querySelectorAll('p:not([class*="text-orange"]):not([class*="text-red"]):not([class*="text-gray-500"])');
            textElements.forEach(el => {
                if (!el.closest('.feature-card') && !el.closest('footer')) {
                    el.style.color = config.text_color || defaultConfig.text_color;
                }
            });

            const buttons = document.querySelectorAll('.btn-glow, .bg-orange-600');
            buttons.forEach(btn => {
                const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
                btn.style.background = primaryColor;
            });

            document.getElementById('siteTitle').textContent = config.site_title || defaultConfig.site_title;
            document.getElementById('heroTitle').textContent = config.hero_title || defaultConfig.hero_title;
            document.getElementById('heroSubtitle').textContent = config.hero_subtitle || defaultConfig.hero_subtitle;
            document.getElementById('feature1Title').textContent = config.feature1_title || defaultConfig.feature1_title;
            document.getElementById('feature1Desc').textContent = config.feature1_desc || defaultConfig.feature1_desc;
            document.getElementById('feature2Title').textContent = config.feature2_title || defaultConfig.feature2_title;
            document.getElementById('feature2Desc').textContent = config.feature2_desc || defaultConfig.feature2_desc;
            document.getElementById('feature3Title').textContent = config.feature3_title || defaultConfig.feature3_title;
            document.getElementById('feature3Desc').textContent = config.feature3_desc || defaultConfig.feature3_desc;
            document.getElementById('ctaButton').textContent = config.cta_button || defaultConfig.cta_button;
        }

        async function initApp() {
            const initResult = await window.dataSdk.init(dataHandler);
            if (!initResult.isOk) {
                showToast('Erreur d\'initialisation', 'error');
            }

            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    onConfigChange,
                    mapToCapabilities: (config) => ({
                        recolorables: [
                            {
                                get: () => config.background_color || defaultConfig.background_color,
                                set: (value) => {
                                    config.background_color = value;
                                    window.elementSdk.setConfig({ background_color: value });
                                }
                            },
                            {
                                get: () => config.surface_color || defaultConfig.surface_color,
                                set: (value) => {
                                    config.surface_color = value;
                                    window.elementSdk.setConfig({ surface_color: value });
                                }
                            },
                            {
                                get: () => config.text_color || defaultConfig.text_color,
                                set: (value) => {
                                    config.text_color = value;
                                    window.elementSdk.setConfig({ text_color: value });
                                }
                            },
                            {
                                get: () => config.primary_action_color || defaultConfig.primary_action_color,
                                set: (value) => {
                                    config.primary_action_color = value;
                                    window.elementSdk.setConfig({ primary_action_color: value });
                                }
                            },
                            {
                                get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                                set: (value) => {
                                    config.secondary_action_color = value;
                                    window.elementSdk.setConfig({ secondary_action_color: value });
                                }
                            }
                        ],
                        borderables: [],
                        fontEditable: undefined,
                        fontSizeable: undefined
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ['site_title', config.site_title || defaultConfig.site_title],
                        ['hero_title', config.hero_title || defaultConfig.hero_title],
                        ['hero_subtitle', config.hero_subtitle || defaultConfig.hero_subtitle],
                        ['feature1_title', config.feature1_title || defaultConfig.feature1_title],
                        ['feature1_desc', config.feature1_desc || defaultConfig.feature1_desc],
                        ['feature2_title', config.feature2_title || defaultConfig.feature2_title],
                        ['feature2_desc', config.feature2_desc || defaultConfig.feature2_desc],
                        ['feature3_title', config.feature3_title || defaultConfig.feature3_title],
                        ['feature3_desc', config.feature3_desc || defaultConfig.feature3_desc],
                        ['cta_button', config.cta_button || defaultConfig.cta_button]
                    ])
                });
            }

            await onConfigChange(defaultConfig);
        }

        initApp();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b2ff46835859d86',t:'MTc2NjU3Nzc5OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>